{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useAsync = exports.useSafeSetState = void 0;\nconst react_1 = require(\"react\");\nconst useSafeSetState = () => {\n  const isMounted = (0, react_1.useRef)(false);\n  (0, react_1.useEffect)(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return (0, react_1.useCallback)(fn => {\n    if (isMounted.current) {\n      fn();\n    }\n  }, []);\n};\nexports.useSafeSetState = useSafeSetState;\nconst useAsync = function (args) {\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n  const {\n    fn,\n    runAtStart = true\n  } = args;\n  const setStateSafe = (0, exports.useSafeSetState)();\n  const [loading, setLoading] = (0, react_1.useState)(runAtStart);\n  const [value, setValue] = (0, react_1.useState)(null);\n  const [error, setError] = (0, react_1.useState)(null);\n  const runFn = (0, react_1.useCallback)(function () {\n    for (var _len2 = arguments.length, newParams = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      newParams[_key2] = arguments[_key2];\n    }\n    return __awaiter(void 0, void 0, void 0, function* () {\n      const paramsToSpread = newParams.length ? newParams : params;\n      try {\n        setStateSafe(() => {\n          setLoading(true);\n        });\n        const result = yield fn(...paramsToSpread);\n        setStateSafe(() => {\n          setValue(result);\n        });\n      } catch (error) {\n        setStateSafe(() => {\n          setError(error);\n        });\n      } finally {\n        setStateSafe(() => {\n          setLoading(false);\n        });\n      }\n    });\n  }, [fn, params, setStateSafe]);\n  const runFnRef = (0, react_1.useRef)(runFn);\n  (0, react_1.useEffect)(() => {\n    runFnRef.current = runFn;\n  }, [runFn]);\n  (0, react_1.useEffect)(() => {\n    if (runAtStart) {\n      runFnRef.current();\n    }\n  }, [runAtStart]);\n  return {\n    loading,\n    value,\n    error,\n    callAgain: (0, react_1.useCallback)(function () {\n      runFnRef.current(...arguments);\n    }, [])\n  };\n};\nexports.useAsync = useAsync;","map":{"version":3,"names":["react_1","require","useSafeSetState","isMounted","useRef","useEffect","current","useCallback","fn","exports","useAsync","args","_len","arguments","length","params","Array","_key","runAtStart","setStateSafe","loading","setLoading","useState","value","setValue","error","setError","runFn","_len2","newParams","_key2","__awaiter","paramsToSpread","result","runFnRef","callAgain"],"sources":["../../src/hooks/useAsync.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}